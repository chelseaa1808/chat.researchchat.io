import{j as e}from"./client-642ef077.js";import{u as b,B as w,a as y}from"./axios-bfc92966.js";import{z as j,r as f,L as k}from"./authApi-94cdca0f.js";import{P as x}from"./main-804f7706.js";import"./index-a0f7b105.js";import"./XMarkIcon-e95b6b05.js";const S=()=>{var m,l,n,c;const{register:d,handleSubmit:g,watch:p,formState:{errors:s}}=b(),[N,{isLoading:i,isError:u,error:r}]=j(),o=f(),h=async a=>{console.log("Registering with data:",a);try{const t=await y.post("https://chat.researchchat.io/api/auth/registration/",{username:a.username,email:a.email,password1:a.password,password2:a.re_password});t.data.access?(localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),o("/adminpanel/")):o(x.LOGIN)}catch(t){console.error("Registration failed:",t)}};return e.jsxs("div",{className:"max-w-md mx-auto px-6 py-16",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center",children:"Create a New Account"}),e.jsxs("form",{onSubmit:g(h),className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",...d("username",{required:"Username is required"}),className:"w-full px-4 py-2 border rounded-md bg-gray-50 dark:bg-gray-700 dark:text-white"}),s.username&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",...d("email",{required:"Email is required"}),className:"w-full px-4 py-2 border rounded-md bg-gray-50 dark:bg-gray-700 dark:text-white"}),s.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",...d("password",{required:"Password is required"}),className:"w-full px-4 py-2 border rounded-md bg-gray-50 dark:bg-gray-700 dark:text-white"}),s.password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",...d("re_password",{required:"Please confirm your password",validate:a=>a===p("password")||"Passwords do not match"}),className:"w-full px-4 py-2 border rounded-md bg-gray-50 dark:bg-gray-700 dark:text-white"}),s.re_password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.re_password.message})]}),e.jsx("div",{className:"pt-2",children:e.jsx(w,{type:"submit",disabled:i,children:i?"Registering...":"Register"})}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",e.jsx(k,{to:x.LOGIN,className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Login here"})]}),u&&e.jsx("p",{className:"text-sm text-red-500",children:((l=(m=r==null?void 0:r.data)==null?void 0:m.email)==null?void 0:l[0])||((c=(n=r==null?void 0:r.data)==null?void 0:n.non_field_errors)==null?void 0:c[0])||"Something went wrong. Please try again."})]})]})};export{S as default};
