import{f as J,h as V,j as Q,k as T,l as A,m as Z,s as ee}from"./authApi-94cdca0f.js";import{r as E}from"./client-642ef077.js";var z="persist:",U="persist/FLUSH",R="persist/REHYDRATE",F="persist/PAUSE",M="persist/PERSIST",W="persist/PURGE",L="persist/REGISTER",re=-1;function I(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(t){return typeof t}:I=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(e)}function K(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function te(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?K(t,!0).forEach(function(n){ne(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ne(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ie(e,r,t,n){n.debug;var i=te({},t);return e&&I(e)==="object"&&Object.keys(e).forEach(function(u){u!=="_persist"&&r[u]===t[u]&&(i[u]=e[u])}),i}function se(e){var r=e.blacklist||null,t=e.whitelist||null,n=e.transforms||[],i=e.throttle||0,u="".concat(e.keyPrefix!==void 0?e.keyPrefix:z).concat(e.key),f=e.storage,l;e.serialize===!1?l=function(h){return h}:typeof e.serialize=="function"?l=e.serialize:l=ue;var o=e.writeFailHandler||null,a={},d={},s=[],y=null,v=null,k=function(h){Object.keys(h).forEach(function(p){O(p)&&a[p]!==h[p]&&s.indexOf(p)===-1&&s.push(p)}),Object.keys(a).forEach(function(p){h[p]===void 0&&O(p)&&s.indexOf(p)===-1&&a[p]!==void 0&&s.push(p)}),y===null&&(y=setInterval(m,i)),a=h};function m(){if(s.length===0){y&&clearInterval(y),y=null;return}var c=s.shift(),h=n.reduce(function(p,b){return b.in(p,c,a)},a[c]);if(h!==void 0)try{d[c]=l(h)}catch(p){console.error("redux-persist/createPersistoid: error serializing state",p)}else delete d[c];s.length===0&&P()}function P(){Object.keys(d).forEach(function(c){a[c]===void 0&&delete d[c]}),v=f.setItem(u,l(d)).catch(w)}function O(c){return!(t&&t.indexOf(c)===-1&&c!=="_persist"||r&&r.indexOf(c)!==-1)}function w(c){o&&o(c)}var _=function(){for(;s.length!==0;)m();return v||Promise.resolve()};return{update:k,flush:_}}function ue(e){return JSON.stringify(e)}function ae(e){var r=e.transforms||[],t="".concat(e.keyPrefix!==void 0?e.keyPrefix:z).concat(e.key),n=e.storage;e.debug;var i;return e.deserialize===!1?i=function(f){return f}:typeof e.deserialize=="function"?i=e.deserialize:i=oe,n.getItem(t).then(function(u){if(u)try{var f={},l=i(u);return Object.keys(l).forEach(function(o){f[o]=r.reduceRight(function(a,d){return d.out(a,o,l)},i(l[o]))}),f}catch(o){throw o}else return})}function oe(e){return JSON.parse(e)}function fe(e){var r=e.storage,t="".concat(e.keyPrefix!==void 0?e.keyPrefix:z).concat(e.key);return r.removeItem(t,le)}function le(e){}function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?q(t,!0).forEach(function(n){ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ce(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pe(e,r){if(e==null)return{};var t=de(e,r),n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)n=u[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function de(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,u;for(u=0;u<n.length;u++)i=n[u],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var ye=5e3;function ve(e,r){var t=e.version!==void 0?e.version:re;e.debug;var n=e.stateReconciler===void 0?ie:e.stateReconciler,i=e.getStoredState||ae,u=e.timeout!==void 0?e.timeout:ye,f=null,l=!1,o=!0,a=function(s){return s._persist.rehydrated&&f&&!o&&f.update(s),s};return function(d,s){var y=d||{},v=y._persist,k=pe(y,["_persist"]),m=k;if(s.type===M){var P=!1,O=function(x,S){P||(s.rehydrate(e.key,x,S),P=!0)};if(u&&setTimeout(function(){!P&&O(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},u),o=!1,f||(f=se(e)),v)return g({},r(m,s),{_persist:v});if(typeof s.rehydrate!="function"||typeof s.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return s.register(e.key),i(e).then(function(b){var x=e.migrate||function(S,Fe){return Promise.resolve(S)};x(b,t).then(function(S){O(S)},function(S){O(void 0,S)})},function(b){O(void 0,b)}),g({},r(m,s),{_persist:{version:t,rehydrated:!1}})}else{if(s.type===W)return l=!0,s.result(fe(e)),g({},r(m,s),{_persist:v});if(s.type===U)return s.result(f&&f.flush()),g({},r(m,s),{_persist:v});if(s.type===F)o=!0;else if(s.type===R){if(l)return g({},m,{_persist:g({},v,{rehydrated:!0})});if(s.key===e.key){var w=r(m,s),_=s.payload,c=n!==!1&&_!==void 0?n(_,d,w,e):w,h=g({},c,{_persist:g({},v,{rehydrated:!0})});return a(h)}}}if(!v)return r(d,s);var p=r(m,s);return p===m?d:a(g({},p,{_persist:v}))}}function X(e){return ge(e)||he(e)||me()}function me(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function he(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function ge(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function $(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?G(t,!0).forEach(function(n){Oe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Oe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var N={registry:[],bootstrapped:!1},Se=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return $({},r,{registry:[].concat(X(r.registry),[t.key])});case R:var n=r.registry.indexOf(t.key),i=X(r.registry);return i.splice(n,1),$({},r,{registry:i,bootstrapped:i.length===0});default:return r}};function be(e,r,t){var n=t||!1,i=J(Se,N,r&&r.enhancer?r.enhancer:void 0),u=function(a){i.dispatch({type:L,key:a})},f=function(a,d,s){var y={type:R,payload:d,err:s,key:a};e.dispatch(y),i.dispatch(y),n&&l.getState().bootstrapped&&(n(),n=!1)},l=$({},i,{purge:function(){var a=[];return e.dispatch({type:W,result:function(s){a.push(s)}}),Promise.all(a)},flush:function(){var a=[];return e.dispatch({type:U,result:function(s){a.push(s)}}),Promise.all(a)},pause:function(){e.dispatch({type:F})},persist:function(){e.dispatch({type:M,register:u,rehydrate:f})}});return r&&r.manualPersist||l.persist(),l}var C={},H={};H.__esModule=!0;H.default=_e;function j(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(t){return typeof t}:j=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}function D(){}var Pe={getItem:D,setItem:D,removeItem:D};function we(e){if((typeof self>"u"?"undefined":j(self))!=="object"||!(e in self))return!1;try{var r=self[e],t="redux-persist ".concat(e," test");r.setItem(t,"test"),r.getItem(t),r.removeItem(t)}catch{return!1}return!0}function _e(e){var r="".concat(e,"Storage");return we(r)?self[r]:Pe}C.__esModule=!0;C.default=je;var Ee=Ie(H);function Ie(e){return e&&e.__esModule?e:{default:e}}function je(e){var r=(0,Ee.default)(e);return{getItem:function(n){return new Promise(function(i,u){i(r.getItem(n))})},setItem:function(n,i){return new Promise(function(u,f){u(r.setItem(n,i))})},removeItem:function(n){return new Promise(function(i,u){i(r.removeItem(n))})}}}var Y=void 0,Re=ke(C);function ke(e){return e&&e.__esModule?e:{default:e}}var xe=(0,Re.default)("local");Y=xe;const De=V({auth:Q,[T.reducerPath]:T.reducer,[A.reducerPath]:A.reducer}),Te={key:"chattr",storage:Y},Ae=ve(Te,De),$e=()=>{var n;const e="csrftoken",t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2?(n=t.pop())==null?void 0:n.split(";").shift():null},B=Z({reducer:Ae,middleware:e=>e({serializableCheck:{ignoredActions:[U,R,F,M,W,L]}}).concat(T.middleware).concat(A.middleware).concat(r=>t=>n=>{var i,u,f;if(n.type.endsWith("/rejected")&&((u=(i=n.error)==null?void 0:i.message)!=null&&u.includes("403"))){const l=$e();if(l&&((f=n.meta)!=null&&f.request)){const o=n.meta.request.headers||{};return o["X-CSRFToken"]=l,t(r.dispatch(n.meta.request))}}return t(n)})});ee(B.dispatch);const Le=be(B);function ze({title:e,titleId:r,...t},n){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?E.createElement("title",{id:r},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Ue=E.forwardRef(ze),Ce=Ue;export{Ce as X,Le as p,B as s};
