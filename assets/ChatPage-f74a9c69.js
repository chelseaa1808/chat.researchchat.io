import{r as n,j as t}from"./client-642ef077.js";import{n as f,o as p,p as w,q as b,r as y,t as j,v}from"./authApi-94cdca0f.js";import{C}from"./ChatHistory-074abdb4.js";import{X as k}from"./XMarkIcon-e95b6b05.js";import"./index-a0f7b105.js";function E({title:a,titleId:e,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":e},r),a?n.createElement("title",{id:e},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const N=n.forwardRef(E),M=N;function R({title:a,titleId:e,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":e},r),a?n.createElement("title",{id:e},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const S=n.forwardRef(R),L=S;function B({uuid:a}){const[e,r]=n.useState(""),[o,d]=f({fixedCacheKey:"message-sending"});p();const i=s=>{s.preventDefault(),e.trim()!==""&&(o({uuid:a,text:e}),r(""))},u=s=>{r(s.target.value)},c=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i(s))};return t.jsx("div",{children:t.jsx("form",{onSubmit:i,children:t.jsxs("div",{className:"flex items-center justify-between w-full p-3 border-t border-gray-300",children:[t.jsx("textarea",{placeholder:"Type your message",id:"chatInputTextarea",value:e,onChange:u,onKeyDown:c,className:"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-lg outline-none focus:text-gray-700 max-h-64 h-11 resize-none"}),t.jsx("button",{className:"flex items-center px-3 py-2 mx-2 rounded-md bg-lime-200",type:"submit",disabled:e.trim()==="",children:t.jsx(M,{className:"w-5 h-5 text-gray-500 origin-center"})})]})})})}const P=()=>{var m;const{slug:a,uuid:e}=w(),[r]=b(),o=y(),[d]=j(),{data:i}=v(e,{skip:!e}),[u,c]=n.useState(!1),s=(m=i==null?void 0:i.chat_page)==null?void 0:m.disclaimer;n.useEffect(()=>{if(a&&!e){const g=r.get("uid");d({slug:a,external_id:g}).then(l=>{var h;(h=l==null?void 0:l.data)!=null&&h.uuid&&o(`/chat/${a}/${l.data.uuid}`)})}},[a,e,r,d,o]),n.useEffect(()=>{s&&c(!0)},[s]);const x=()=>{c(!1)};return t.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6",children:[u&&t.jsxs("div",{className:"flex items-center justify-between p-3 mb-4 text-sm text-white bg-rose-500 rounded",children:[t.jsxs("span",{children:[t.jsx(L,{className:"inline w-4 h-4 mr-1 -mt-0.5"}),s]}),t.jsx("button",{onClick:x,children:t.jsx(k,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 border rounded-lg shadow overflow-hidden",children:[t.jsx(C,{slug:a,uuid:e}),t.jsx("div",{className:"border-t px-4 py-2 bg-gray-50 dark:bg-gray-900",children:t.jsx(B,{uuid:e})})]})]})};export{P as default};
